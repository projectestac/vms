<VirtualHost *:80>
    ServerName sinapsi-aws.xtec.cat
    ServerAdmin webmaster@localhost

    DocumentRoot /dades/html/public
    <Directory /dades/html/public/>
        Options +FollowSymLinks -MultiViews -Indexes
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLogFormat "[%{u}t] [%-m:%l] [pid %P] [client\ %a] [%{X-Forwarded-For}i] %M% ,\ referer\ %{Referer}i \"%{User-Agent}i\""
    ErrorLog ${APACHE_LOG_DIR}/error.log
    LogFormat "%h [%{X-Forwarded-For}i] %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\"" combined
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

<VirtualHost *:443>
    ServerName sinapsi-aws.xtec.cat
    ServerAdmin webmaster@localhost

    DocumentRoot /dades/html/public
    Alias "/phpmyadmin" "/var/www/phpmyadmin"
    <Directory /dades/html/public/>
        Options +FollowSymLinks -MultiViews -Indexes
        AllowOverride All
        Require all granted
    </Directory>

    SSLEngine on
    SSLCertificateFile  /etc/ssl/certs/ssl-cert-snakeoil.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

    ErrorLogFormat "[%{u}t] [%-m:%l] [pid %P] [client\ %a] [%{X-Forwarded-For}i] %M% ,\ referer\ %{Referer}i \"%{User-Agent}i\""
    ErrorLog ${APACHE_LOG_DIR}/error.log
    LogFormat "%h [%{X-Forwarded-For}i] %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\"" combined
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
